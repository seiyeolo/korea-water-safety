# Prisma Seed ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© ê°€ì´ë“œ

## ê°œìš”

ì´ ë¬¸ì„œëŠ” í•œêµ­ìˆ˜ìƒì•ˆì „í˜‘íšŒ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì‹œë“œ ë°ì´í„° ìƒì„± ë° ì‚¬ìš© ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

## ìƒì„±ë˜ëŠ” ìƒ˜í”Œ ë°ì´í„°

### 1. ì‚¬ìš©ì ê³„ì • (4ê°œ)

#### ê´€ë¦¬ì ê³„ì •
- **ì´ë©”ì¼**: `admin@watersafety.org`
- **ì—­í• **: ADMIN (ê´€ë¦¬ì)
- **ì´ë¦„**: ê´€ë¦¬ì
- **ì „í™”**: 042-123-4567

#### ê°•ì‚¬ ê³„ì •
- **ì´ë©”ì¼**: `instructor@watersafety.org`
- **ì—­í• **: INSTRUCTOR (ê°•ì‚¬)
- **ì´ë¦„**: ê¹€ê°•ì‚¬
- **ì „í™”**: 010-1234-5678

#### ì¼ë°˜ ì‚¬ìš©ì ê³„ì • 1
- **ì´ë©”ì¼**: `user1@example.com`
- **ì—­í• **: USER (ì¼ë°˜ íšŒì›)
- **ì´ë¦„**: í™ê¸¸ë™
- **ì „í™”**: 010-2345-6789

#### ì¼ë°˜ ì‚¬ìš©ì ê³„ì • 2
- **ì´ë©”ì¼**: `user2@example.com`
- **ì—­í• **: USER (ì¼ë°˜ íšŒì›)
- **ì´ë¦„**: ì´ì˜í¬
- **ì „í™”**: 010-3456-7890

> âš ï¸ **ì¤‘ìš”**: ëª¨ë“  ê³„ì •ì˜ ë¹„ë°€ë²ˆí˜¸ëŠ” bcryptë¡œ í•´ì‹œ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.
> í˜„ì¬ëŠ” í”Œë ˆì´ìŠ¤í™€ë”(`$2a$10$YourHashedPasswordHere`)ê°€ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### 2. êµìœ¡ í”„ë¡œê·¸ë¨ (10ê°œ)

1. **ìƒì¡´ìˆ˜ì˜ ì§€ë„ì ì–‘ì„±ê³¼ì •**
   - ê¸°ê°„: 40ì‹œê°„
   - ê°€ê²©: 350,000ì›
   - ì •ì›: 30ëª…

2. **ìˆ˜ìƒì¸ëª…êµ¬ì¡°ì‚¬ ìê²©ê³¼ì •**
   - ê¸°ê°„: 80ì‹œê°„
   - ê°€ê²©: 600,000ì›
   - ì •ì›: 25ëª…

3. **ìˆ˜ìƒë ˆì € ì•ˆì „êµìœ¡ ì§€ë„ìê³¼ì •**
   - ê¸°ê°„: 32ì‹œê°„
   - ê°€ê²©: 280,000ì›
   - ì •ì›: 20ëª…

4. **ì–´ë¦°ì´ ìˆ˜ìƒì•ˆì „ êµìœ¡ê³¼ì •**
   - ê¸°ê°„: 16ì‹œê°„
   - ê°€ê²©: 80,000ì›
   - ì •ì›: 40ëª…

5. **ì‹¬íì†Œìƒìˆ (CPR) ìê²©ê³¼ì •**
   - ê¸°ê°„: 8ì‹œê°„
   - ê°€ê²©: 120,000ì›
   - ì •ì›: 30ëª…

6. **ìˆ˜ì˜ì¥ ì•ˆì „ê´€ë¦¬ì ì–‘ì„±ê³¼ì •**
   - ê¸°ê°„: 24ì‹œê°„
   - ê°€ê²©: 200,000ì›
   - ì •ì›: 25ëª…

7. **ìŠ¤ë…¸í´ë§ ì§€ë„ì ìê²©ê³¼ì •**
   - ê¸°ê°„: 20ì‹œê°„
   - ê°€ê²©: 250,000ì›
   - ì •ì›: 15ëª…

8. **ì¹´ì•½ ì•ˆì „êµìœ¡ ì§€ë„ìê³¼ì •**
   - ê¸°ê°„: 28ì‹œê°„
   - ê°€ê²©: 320,000ì›
   - ì •ì›: 20ëª…

9. **ìˆ˜ìƒì•ˆì „ ì‘ê¸‰ì²˜ì¹˜ ì „ë¬¸ê³¼ì •**
   - ê¸°ê°„: 16ì‹œê°„
   - ê°€ê²©: 180,000ì›
   - ì •ì›: 30ëª…

10. **ìˆ˜ìƒì•ˆì „ ê°•ì‚¬ ë³´ìˆ˜êµìœ¡**
    - ê¸°ê°„: 8ì‹œê°„
    - ê°€ê²©: 100,000ì›
    - ì •ì›: 50ëª…

### 3. ê³µì§€ì‚¬í•­ ê²Œì‹œê¸€ (20ê°œ)

ë‹¤ì–‘í•œ ì¹´í…Œê³ ë¦¬ì˜ ê²Œì‹œê¸€:
- **NOTICE** (ê³µì§€ì‚¬í•­): 9ê°œ
- **NEWS** (ìƒˆì†Œì‹): 6ê°œ
- **EVENT** (í–‰ì‚¬): 4ê°œ
- **FAQ** (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸): 1ê°œ

ì£¼ìš” ê²Œì‹œê¸€:
- êµìœ¡ ê³¼ì • ëª¨ì§‘ ê³µê³ 
- ìê²©ì‹œí—˜ ì¼ì • ì•ˆë‚´
- ì°½ë¦½ê¸°ë…ì‹ ê°œìµœ
- ë´‰ì‚¬ë‹¨ ëª¨ì§‘
- ë¬´ë£Œ êµìœ¡ ì•ˆë‚´
- ì•ˆì „ìˆ˜ì¹™ ì•ˆë‚´
- ì´ë²¤íŠ¸ ê³µì§€ ë“±

### 4. ì²¨ë¶€íŒŒì¼ (3ê°œ)

ì¼ë¶€ ê³µì§€ì‚¬í•­ì— PDF ì²¨ë¶€íŒŒì¼ í¬í•¨:
- ìƒì¡´ìˆ˜ì˜ ì§€ë„ì ëª¨ì§‘ ê³µê³ 
- ìˆ˜ìƒì¸ëª…êµ¬ì¡°ì‚¬ ì‹œí—˜ ì¼ì •
- ì°½ë¦½ê¸°ë…ì‹ ì´ˆì²­ì¥

## ì‚¬ìš© ë°©ë²•

### 1. ë°ì´í„°ë² ì´ìŠ¤ ì¤€ë¹„

ë¨¼ì € PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ê³ , `.env` íŒŒì¼ì— ì˜¬ë°”ë¥¸ DATABASE_URLì´ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

```bash
# PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± (ì•„ì§ ìƒì„±í•˜ì§€ ì•Šì•˜ë‹¤ë©´)
createdb water_safety_association
```

### 2. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰

ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```bash
cd backend
npm run prisma:migrate
```

ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ë¦„ì„ ì…ë ¥í•˜ë¼ëŠ” ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚˜ë©´ ì˜ë¯¸ ìˆëŠ” ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:
```
Enter a name for the new migration: â€º init
```

### 3. ì‹œë“œ ë°ì´í„° ìƒì„±

ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì‹œë“œ ë°ì´í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ë°©ë²• 1: npm ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© (ê¶Œì¥)

```bash
npm run prisma:seed
```

#### ë°©ë²• 2: Prisma CLI ì§ì ‘ ì‚¬ìš©

```bash
npx prisma db seed
```

### 4. ê²°ê³¼ í™•ì¸

ì‹œë“œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ ë‹¤ìŒê³¼ ê°™ì€ í†µê³„ê°€ ì¶œë ¥ë©ë‹ˆë‹¤:

```
ğŸŒ± Starting database seeding...

ğŸ§¹ Cleaning existing data...
âœ… Existing data cleaned

ğŸ‘¤ Creating admin account...
âœ… Admin created: admin@watersafety.org

ğŸ‘¥ Creating test users...
âœ… 3 test users created

ğŸ“š Creating education programs...
âœ… 10 education programs created

ğŸ“¢ Creating notice posts...
âœ… 20 notice posts created

ğŸ“ Adding attachments to some posts...
âœ… 3 attachments added

ğŸ“Š Seeding completed successfully!

=================================
ğŸ‘¥ Users: 4
ğŸ“š Education Programs: 10
ğŸ“¢ Posts: 20
ğŸ“ Attachments: 3
=================================

ğŸ”‘ Test Accounts:
Admin: admin@watersafety.org
Instructor: instructor@watersafety.org
User 1: user1@example.com
User 2: user2@example.com

âš ï¸  Default password needs to be hashed with bcrypt
    Use: await bcrypt.hash("your-password", 10)
```

### 5. Prisma Studioë¡œ í™•ì¸

GUIë¥¼ í†µí•´ ìƒì„±ëœ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
npm run prisma:studio
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:5555`ê°€ ìë™ìœ¼ë¡œ ì—´ë¦½ë‹ˆë‹¤.

## ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ ì²˜ë¦¬

ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸° ì „ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ bcryptë¡œ í•´ì‹œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

### bcrypt ì„¤ì¹˜

```bash
npm install bcrypt
npm install -D @types/bcrypt
```

### ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ ìƒì„± ì˜ˆì œ

```typescript
import bcrypt from 'bcrypt';

// ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ ìƒì„±
const password = 'your-secure-password';
const hashedPassword = await bcrypt.hash(password, 10);
console.log(hashedPassword);

// seed.tsì—ì„œ ì‚¬ìš©
const admin = await prisma.user.create({
  data: {
    email: 'admin@watersafety.org',
    password: hashedPassword, // í•´ì‹œëœ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©
    // ... ë‚˜ë¨¸ì§€ í•„ë“œ
  },
});
```

### ê¶Œì¥ í…ŒìŠ¤íŠ¸ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •

ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê°„ë‹¨í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```typescript
const testPassword = await bcrypt.hash('test1234', 10);
```

## ë°ì´í„° ì´ˆê¸°í™”

ê°œë°œ ì¤‘ì— ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ ì‹œë“œ ë°ì´í„°ë¥¼ ìƒì„±í•˜ë ¤ë©´:

```bash
# ë°©ë²• 1: ë§ˆì´ê·¸ë ˆì´ì…˜ ë¦¬ì…‹ (ì‹œë“œ ìë™ ì‹¤í–‰)
npx prisma migrate reset

# ë°©ë²• 2: ìˆ˜ë™ìœ¼ë¡œ ë°ì´í„° ì‚­ì œ í›„ ì‹œë“œ ì‹¤í–‰
npm run prisma:seed
```

> âš ï¸ **ì£¼ì˜**: `migrate reset` ëª…ë ¹ì€ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ë¯€ë¡œ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•˜ì„¸ìš”!

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ: "Cannot connect to database"

**í•´ê²°ì±…**:
1. PostgreSQLì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
2. `.env` íŒŒì¼ì˜ DATABASE_URLì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
3. ë°ì´í„°ë² ì´ìŠ¤ê°€ ìƒì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

```bash
# PostgreSQL ìƒíƒœ í™•ì¸
pg_isready

# ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡ í™•ì¸
psql -U postgres -c "\l"
```

### ë¬¸ì œ: "Unique constraint failed"

**í•´ê²°ì±…**:
ì´ë¯¸ ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë¦¬ì…‹í•˜ì„¸ìš”.

```bash
npx prisma migrate reset
```

### ë¬¸ì œ: "Cannot find module '@prisma/client'"

**í•´ê²°ì±…**:
Prisma Clientë¥¼ ìƒì„±í•˜ì„¸ìš”.

```bash
npm run prisma:generate
```

## ë‹¤ìŒ ë‹¨ê³„

ì‹œë“œ ë°ì´í„° ìƒì„± í›„:

1. **API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸**: ìƒì„±ëœ ë°ì´í„°ë¡œ API ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
2. **í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™**: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œ API í˜¸ì¶œ
3. **ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„**: JWT ê¸°ë°˜ ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€
4. **ì¶”ê°€ ì‹œë“œ ë°ì´í„°**: í•„ìš”ì— ë”°ë¼ ë” ë§ì€ ìƒ˜í”Œ ë°ì´í„° ì¶”ê°€

## ì°¸ê³  ìë£Œ

- [Prisma Seeding Documentation](https://www.prisma.io/docs/guides/database/seed-database)
- [bcrypt Documentation](https://github.com/kelektiv/node.bcrypt.js)
